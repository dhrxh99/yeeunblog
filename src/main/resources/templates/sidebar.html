<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
<!-- 재사용 프래그먼트: 사이드바 -->
<div th:fragment="sidebar">
    <aside style="width:280px; padding:16px; border:1px solid #cfd8e3; border-radius:12px;">
        <!-- 프로필 카드 -->
        <section style="border:1px solid #cfd8e3; border-radius:12px; padding:16px; margin-bottom:16px;">
            <h3 style="margin:0 0 12px;">프로필</h3>

            <!-- 로그인 후 -->
            <div sec:authorize="isAuthenticated()">
                <div style="display:flex; align-items:center; gap:12px;">
                    <div style="width:56px; height:56px; border-radius:50%; background:#e8eef7;"></div>
                    <div>
                        <div th:text="${currentUser != null ? currentUser.nickname : '사용자'}">사용자</div>
                        <small th:text="${currentUser != null ? currentUser.username : ''}">username</small>
                    </div>
                </div>
                <div style="margin-top:12px; display:flex; gap:8px;">
                    <a th:href="@{/mypage}">내정보</a>
                    <a th:href="@{/logout}">로그아웃</a>
                </div>
            </div>

            <!-- 로그인 전 -->
            <div sec:authorize="isAnonymous()">
                <p style="margin:0 0 8px;">로그인이 필요합니다.</p>
                <div style="display:flex; gap:8px;">
                    <a th:href="@{/login}">로그인</a>
                    <a th:href="@{/signup}">회원가입</a>
                </div>
            </div>
        </section>

        <!-- 게시판 이동 -->
        <section style="border:1px solid #cfd8e3; border-radius:12px; padding:16px;">
            <h3 style="margin:0 0 12px;">게시판 카테고리</h3>
            <ul style="list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px;">
                <li><a th:href="@{/it}">IT</a></li>
                <li><a th:href="@{/japanese}">일본어</a></li>
            </ul>
        </section>
    </aside>
</div>
</body>
</html>
